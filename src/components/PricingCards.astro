---
import { t, type Lang } from "../i18n/ui";
interface Props { lang: Lang }
const { lang } = Astro.props;

const tiers = [
  {
    name: t(lang, "pricing.explorer"),
    audience: t(lang, "pricing.explorerAud"),
    features: [t(lang, "pricing.explorerF1"), t(lang, "pricing.explorerF2"), t(lang, "pricing.explorerF3")],
  },
  {
    name: t(lang, "pricing.professional"),
    audience: t(lang, "pricing.professionalAud"),
    features: [t(lang, "pricing.professionalF1"), t(lang, "pricing.professionalF2"), t(lang, "pricing.professionalF3"), t(lang, "pricing.professionalF4")],
    highlighted: true,
  },
  {
    name: t(lang, "pricing.team"),
    audience: t(lang, "pricing.teamAud"),
    features: [t(lang, "pricing.teamF1"), t(lang, "pricing.teamF2"), t(lang, "pricing.teamF3"), t(lang, "pricing.teamF4")],
  },
  {
    name: t(lang, "pricing.enterprise"),
    audience: t(lang, "pricing.enterpriseAud"),
    features: [t(lang, "pricing.enterpriseF1"), t(lang, "pricing.enterpriseF2"), t(lang, "pricing.enterpriseF3"), t(lang, "pricing.enterpriseF4")],
  },
];

const pillars = [
  { label: t(lang, "pricing.algorithms"), detail: t(lang, "pricing.algorithmsDesc") },
  { label: t(lang, "pricing.performance"), detail: t(lang, "pricing.performanceDesc") },
  { label: t(lang, "pricing.infrastructure"), detail: t(lang, "pricing.infrastructureDesc") },
  { label: t(lang, "pricing.dataSecurity"), detail: t(lang, "pricing.dataSecurityDesc") },
];
---

<section id="pricing" class="py-20 sm:py-28 bg-white">
  <div class="mx-auto max-w-5xl px-6">
    <div class="text-center">
      <h2 class="text-3xl sm:text-4xl font-bold text-barivia-dark tracking-tight">
        {t(lang, "pricing.heading")}
      </h2>
      <p class="mt-4 text-lg text-barivia-gray max-w-2xl mx-auto leading-relaxed">
        {t(lang, "pricing.sub")}
      </p>
    </div>

    <!-- Tier cards -->
    <div class="mt-14 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5">
      {tiers.map((tier) => (
        <div
          class:list={[
            "rounded-xl p-6 flex flex-col border",
            tier.highlighted
              ? "bg-barivia-dark text-white border-barivia-dark shadow-xl"
              : "bg-barivia-light border-gray-100",
          ]}
        >
          <h3
            class:list={[
              "text-lg font-bold",
              tier.highlighted ? "text-white" : "text-barivia-dark",
            ]}
          >
            {tier.name}
          </h3>
          <p
            class:list={[
              "mt-1 text-sm",
              tier.highlighted ? "text-blue-200" : "text-barivia-gray",
            ]}
          >
            {tier.audience}
          </p>
          <ul class="mt-5 space-y-2 flex-1">
            {tier.features.map((feature) => (
              <li class="flex items-start gap-2 text-sm">
                <span class={tier.highlighted ? "text-blue-200" : "text-barivia-blue"}>
                  &#10003;
                </span>
                <span class={tier.highlighted ? "text-blue-100" : "text-barivia-gray"}>
                  {feature}
                </span>
              </li>
            ))}
          </ul>
          <a
            href={tier.name === t(lang, "pricing.enterprise")
              ? "mailto:info@barivia.se?subject=Barivia%20Enterprise"
              : "#pilot"}
            class:list={[
              "mt-6 block rounded-lg py-2.5 text-center text-sm font-semibold transition-colors",
              tier.highlighted
                ? "bg-white text-barivia-dark hover:bg-blue-50"
                : "bg-barivia-blue text-white hover:bg-barivia-dark",
            ]}
          >
            {tier.name === t(lang, "pricing.enterprise") ? t(lang, "pricing.ctaEnterprise") : t(lang, "pricing.ctaEarly")}
          </a>
        </div>
      ))}
    </div>

    <!-- What you get -->
    <div class="mt-20">
      <h3 class="text-xl font-bold text-barivia-dark text-center tracking-tight">
        {t(lang, "pricing.pillarsHeading")}
      </h3>
      <div class="mt-10 grid grid-cols-1 sm:grid-cols-2 gap-8">
        {pillars.map((pillar) => (
          <div class="flex gap-4">
            <div class="flex-shrink-0 mt-1 h-2 w-2 rounded-full bg-barivia-blue"></div>
            <div>
              <p class="font-semibold text-barivia-dark">{pillar.label}</p>
              <p class="mt-1 text-sm text-barivia-gray leading-relaxed">{pillar.detail}</p>
            </div>
          </div>
        ))}
      </div>
    </div>

    <p class="mt-14 text-center text-barivia-gray">
      {t(lang, "pricing.closing")}
    </p>
  </div>
</section>
